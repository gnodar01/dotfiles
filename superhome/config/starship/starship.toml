"$schema" = 'https://starship.rs/config-schema.json'

# https://starship.rs/config/#prompt
format = """
$hostname\
$username\
$os\
$memory_usage\
$directory\
$git_branch\
$git_commit\
$git_metrics\
$git_status
$character
"""
right_format = """
$status\
${env_var.SHLVL}\
$shlvl\
$pixi\
$nix_shell\
$python\
$nodejs\
$git_state\
$jobs\
"""
scan_timeout = 30 # ms
command_timeout = 500 # ms
# newline added by transient_shell
add_newline = false
follow_symlinks = true

palette = "dracula"

[palettes.dracula]
background = "#282a36"
current_line = "#44475a"
foreground = "#f8f8f2"
comment = "#6272a4"
cyan = "#8be9fd"
green = "#50fa7b"
orange = "#ffb86c"
pink = "#ff79c6"
purple = "#bd93f9"
red = "#ff5555"
yellow = "#f1fa8c"

## Left Prompts

# https://starship.rs/config/#character
[character]
format = '$symbol '
success_symbol = '[â¯](bold green)'
error_symbol = '[â¯](bold red)'
vimcmd_symbol = '[â®](bold green)'
vimcmd_replace_one_symbol = '[â®](bold purple)'
vimcmd_replace_symbol = '[â®](bold purple)'
vimcmd_visual_symbol = '[â®](bold yellow)'
disabled = false

# https://starship.rs/config/#package-version
[package]
  disabled = true

# https://starship.rs/config/#hostname
[hostname]
  style = 'bold cyan'
  ssh_only = false
  trim_at = '.'
  format = '[$ssh_symbol$hostname]($style) '

# https://starship.rs/config/#username
[username]
  style_user = 'bold dimmed yellow'
  show_always = true
  format = '\([$user]($style)\) '

# https://starship.rs/config/#os
[os]
  disabled = true
  style = 'bold orange'
  format = '[$name - $version]($style)'

# https://starship.rs/config/#memory-usage
[memory_usage]
  disabled = true
  style = 'bold dimmed white'
  threshold = 0
  format = 'using $symbol[ram $ram( | swap $swap)]($style) '

# https://starship.rs/config/#directory
[directory]
  truncation_length = 20
  truncate_to_repo = false
  style = 'bold purple'
  format = '[$path]($style)[$read_only]($read_only_style) '
  read_only = 'ğŸ”’'
  read_only_style = 'red'
  #truncation_symbol = '.../'
  truncation_symbol = ''
  before_repo_root_style = 'dimmed purple'
  repo_root_style = 'bold purple'
  repo_root_format = '[$before_root_path]($before_repo_root_style)[$repo_root]($repo_root_style)[$path]($style)[$read_only]($read_only_style) '
  home_symbol = '~'
  use_os_path_sep = true
  fish_style_pwd_dir_length = 3

[directory.substitutions]
  '~/Developer' = '(dev)'

# https://starship.rs/config/#git-branch
[git_branch]
  disabled = false
  style = 'bold green'
  format = '[$symbol$branch(:$remote_branch)]($style) '
  always_show_remote = false
  symbol = 'î‚  '
  truncation_length = 9223372036854775807 # 2^63-1
  truncation_symbol = 'â€¦'
  only_attached = false
  ignore_branches = []

# https://starship.rs/config/#git-branch
[git_commit]
  disabled = false
  format = '[\($hash$tag\)]($style) '
  style = 'bold yellow'
  only_detached = true
  tag_disabled = false
  tag_max_candidates = 0
  tag_symbol = ' ğŸ·ï¸ '

# https://starship.rs/config/#git-metrics
[git_metrics]
  disabled = false

# https://starship.rs/config/#git-status
[git_status]
  disabled = false
  style = 'bold pink'
  stashed = '*'


## Right Prompts

# https://starship.rs/config/#environment-variable
[env_var.SHLVL]
  disabled = true # in favor of below
  format = '[\($symbol$env_value\)]($style) '
  default = '?'
  style = 'orange bold'
  #symbol = 'ğŸšï¸'
  symbol = ''

# https://starship.rs/config/#shlvl
[shlvl]
  disabled = false # in favor of below
  format = '[\($symbol$shlvl\)]($style) '
  style = 'orange bold'
  #symbol = 'â†•ï¸ '
  symbol = ''
  threshold = 2
  repeat = false
  repeat_offset = 0

[pixi]
  disabled = false
  format = '[$symbol(\($environment\) )]($style)'
  version_format = 'v${raw}'
  # fairy is a wide unicode char suffering from:
  # https://github.com/starship/starship/issues/6524
  symbol = 'ğŸ“¦ '
  style = 'yellow bold'
  show_default_environment = true
  pixi_binary = ['pixi']
  detect_extensions = []
  detect_files = ['pixi.toml']
  detect_folders = ['.pixi']

# https://starship.rs/config/#nix-shell
[nix_shell]
  disabled = false
  style = 'bold cyan'
  symbol = 'â„ï¸ '
  format = '[$symbol$state( \($name\))]($style) '
  impure_msg = 'impure'
  pure_msg = 'pure'
  unknown_msg = ''
  heuristic = false

[python]
  disabled = false
  format = '[${symbol}(${version} )(\($virtualenv\) )]($style)'
  version_format = 'v${raw}'
  symbol = 'ğŸ '
  style = 'yellow bold'
  # customize python binary path for pixi
  python_binary = [
    # this is the python from PATH if in a pixi shell
    # (assuming no python on global PATH)
    "python",
    # fall back to pixi's python if it's available
    ".pixi/envs/default/bin/python",
  ]
  detect_extensions = ['py', 'ipynb']
  detect_files = [
    '.python-version',
    'Pipfile',
    '__init__.py',
    'pyproject.toml',
    'requirements.txt',
    'setup.py',
    'tox.ini',
    'pytest.ini',
    'pixi.toml',
    'pixi.lock'
  ]
  detect_folders = []

# https://starship.rs/config/#node-js
[nodejs]
  disabled = false
  format = '[$symbol($version )]($style)'
  version_format = 'v${raw}'
  symbol = 'îœ˜ '
  detect_extensions = ['js', 'mjs', 'cjs', 'ts', 'mts', 'cts', 'tsx']
  detect_files = [
    'package.json',
    '.node-version',
    '.nvmrc'
  ]
  detect_folders = ['node_modules']
  not_capable_style = 'bold red'

# https://starship.rs/config/#git-state
[git_state]
  disabled = false
  style = 'bold green'

# https://starship.rs/config/#jobs
[jobs]
  disabled = false
  format = '[$symbol$number]($style)'
  style = 'bold pink'
  symbol = 'â›­'
  #symbol = 'âœ¦'
  symbol_threshold = 1
  number_threshold = 2

# https://starship.rs/config/#status
[status]
  disabled = false
  format = '[$symbol$common_meaning$maybe_int]($style) '
  style = 'bold red'
  #success_style = ''
  #failure_style = ''
  recognize_signal_code = true
  map_symbol = true
  pipestatus = true
  pipestatus_separator = '|'
  pipestatus_format = '\[$pipestatus\] => [$symbol$common_meaning$signal_name$maybe_int]($style) '
  #pipestatus_segment_format = ''
  symbol = 'âŒ'
  success_symbol = ''
  not_executable_symbol = 'ğŸš«'
  not_found_symbol = 'ğŸ”'
  sigint_symbol = 'â‰ï¸'
